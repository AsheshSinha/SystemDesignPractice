<mxfile host="app.diagrams.net" modified="2024-05-07T04:25:52.497Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.4.1 Safari/605.1.15" etag="g1BQPVVdtjCRNgjuE4zg" version="24.3.1" type="github">
  <diagram name="Page-1" id="OIAHOW4MRP7iXSUrzqny">
    <mxGraphModel dx="2074" dy="1190" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="fmulczopTdYqbhKhcUvP-1" value="Clarifying Points:&lt;div&gt;1. What should be the max length of the URL - as short as possible&lt;/div&gt;&lt;div&gt;2. Confirmation on core functionality -&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;a.There should be a service which accepts a long url and returns a shortened url&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;b. One more service to fetch long url using a short url. The host shall redirect using this service&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;3. Apart from this url shortener generally provides some analytics around clicks. Is that out of scope? - Yes&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;4. So the requirement would be create the services to support shortening feature and skip the UI creation&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;5. How many urls are we planning to support? - that you should find out based on the load&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;6. Ok, how many Daily active users are there? - 10 billion&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="30" y="90" width="790" height="200" as="geometry" />
        </mxCell>
        <mxCell id="fmulczopTdYqbhKhcUvP-3" value="Core Idea:&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;We can create a hash from a given url and store it in a Key value DB, add a cache on top of the DB to improve read performance.This hash can be used as shortened url.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;This also seems to be use case of read heavy as the reads of the urls will be much frequent than creation of url and storing it in the shortener.Thus we would assume 10:1 read-write ratio.&lt;/div&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="30" y="280" width="630" height="80" as="geometry" />
        </mxCell>
        <mxCell id="fmulczopTdYqbhKhcUvP-4" value="Estimates:&lt;div&gt;RPS and CPU&lt;br&gt;&lt;div&gt;If every user uses this service 2-3 time a day, then we would have around 20 billion requests a day.&lt;/div&gt;&lt;div&gt;Requests per second: 20 * 10 ^ 9 / 10 ^ 5 = 20 * 10 ^ 4 = 200,000&lt;/div&gt;&lt;div&gt;Considering average SLA of read requests = 20ms, we can support only 1000/20 = 50 requests/ second using a single core.&lt;/div&gt;&lt;div&gt;Number of core needed = 200,000 / 50 = 4000 core / second , so we would need 4000/ 64 = 60 - 70 machines to support the load.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Storage:&lt;/div&gt;&lt;div&gt;Let&#39;s assume the average size of the url is 100 bytes.Urls generated each day is 20 billion&lt;/div&gt;&lt;div&gt;Size needed : 20 * 10 ^ 6 * 100 bytes = 2000 * 10 ^ 6 bytes = 2 * 10 ^ 9 bytes = 2 TB each day&lt;/div&gt;&lt;div&gt;For 10 years = 365 * 10 * 2 = 7300 TB = 7.3 PB&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="34" y="390" width="760" height="300" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
